<!DOCTYPE html>
<!-- saved from url=(0065)https://thingspeak.mathworks.com/channels/3214645/widgets/1198324 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="./bootstrap.min.css" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous" onerror="tryCssAltUrl(this,&#39;/bootstrap@5.2.2/dist/css/bootstrap.min.css&#39;);">
	<script type="text/javascript" src="./d3.min.js.download" integrity="sha512-oJp0DdQuQQrRsKVly+Ww6fAN1GwJN7d1bi8UubpEbzDUh84WrJ2CFPBnT4LqBCcfqTcHR5OGXFFhaPe3g1/bzQ==" crossorigin="anonymous"></script>
	<script type="text/javascript" src="./topojson.min.js.download" integrity="sha512-4UKI/XKm3xrvJ6pZS5oTRvIQGIzZFoXR71rRBb1y2N+PbwAsKa5tPl2J6WvbEvwN3TxQCm8hMzsl/pO+82iRlg==" crossorigin="anonymous"></script>
	<script src="./thingSpeakWebplot.min-7da07dcb769a90c385cd35080e39b3d512abb2e3d5268a2f7fc008c96696dbd3.js.download"></script>
    <link rel="stylesheet" href="./thingSpeakWebplot.min-6e70973b096dc2b5dcb886e7b90edf194dd7bd5d28ba55a31f3ccd1c4a3f2e7b.css" media="screen">

    <script src="./jquery-a3700c90d2826f7657df0dd91127a4fc6130d3c6e65eb2ab450a04a56b9040bd.js.download"></script>
    <style>
    /* restrict resize of gauge inside window frame */
      .ui-resizable-handle {
        display: none !important;
      }
    </style>
<title>temp</title><script src="./jquery-ui.min.js.download"></script><link href="./jquery-ui.css" type="text/css" rel="stylesheet"></head>

<body style="background-color: #ffffff; overflow-x:hidden; overflow-y:hidden" onload="setGaugeValue();">
    <p id="error" style="width: 100%; position: absolute; z-index: 10; visibility: hidden;"> </p>
    <div id="chart" class="chart ui-resizable" style="background-color: #ffffff; margin: 0 auto; text-align: center;"><div class="vega" style="position: relative;"><svg class="marks" width="420" height="255" style="background-color: rgb(255, 255, 255);"><g transform="translate(0,0)"><g id="g1" class="type-group"><g transform="translate(0,0)"><rect class="background" width="420" height="230" style="pointer-events: none; fill: none;"></rect><g id="g2" class="type-arc"><path transform="translate(210,115)" d="M-0.00024413026099408453,91.99999999967609A92,92 0 1,1 0.0002441302609828178,91.99999999967609L0.00023882308139623482,89.99999999968313A90,90 0 1,0 -0.00023882308140725663,89.99999999968313Z" style="fill: rgb(199, 200, 202);"></path></g><g id="g3" class="type-arc"><path transform="translate(210,115)" d="M-39.99957585405936,69.28227718179701A80,80 0 1,1 39.99957585405938,69.282277181797L38.9995864577079,67.55022025225207A78,78 0 1,0 -38.99958645770788,67.55022025225209Z" style="fill: rgb(109, 110, 112); stroke: rgb(109, 110, 112);"></path></g><g id="g4" class="type-arc"><path transform="translate(210,115)" d="M77.99999999947379,0.0002865099980658089A78,78 0 0,1 38.9995864577079,67.55022025225207L34.99962887230196,60.621992534072376A70,70 0 0,0 69.99999999952776,0.00025712435723854643Z" style="fill: rgb(255, 0, 0);"></path><path transform="translate(210,115)" d="M39.00008270828303,-67.54993374346924A78,78 0 0,1 77.99999999947379,0.0002865099980658089L69.99999999952776,0.00025712435723854643A70,70 0 0,0 35.00007422538221,-60.62173541080572Z" style="fill: rgb(231, 194, 8);"></path><path transform="translate(210,115)" d="M-38.99958645770788,67.55022025225209A78,78 0 1,1 39.00008270828303,-67.54993374346924L35.00007422538221,-60.62173541080572A70,70 0 1,0 -34.99962887230194,60.62199253407238Z" style="fill: rgb(8, 247, 36);"></path></g><g id="g5" class="type-text units"><text x="210" y="240" text-anchor="middle" dy=".35em" style="font: 14px Helvetica; fill: rgb(0, 0, 0);">celcius</text></g><g id="g6" class="type-text value"><text x="210" y="225" text-anchor="middle" dy=".35em" style="font: 14px Helvetica; fill: rgb(0, 0, 0);">29.3</text></g><g id="g7" class="type-text"><text x="182.50029160033418" y="162.63156556248543" text-anchor="middle" dy=".35em" style="font: 11px Helvetica; fill: rgb(0, 0, 0);">0</text><text x="162.36873747661423" y="142.50023327952525" text-anchor="middle" dy=".35em" style="font: 11px Helvetica; fill: rgb(0, 0, 0);">5</text><text x="155.00000000037105" y="115.00020202628068" text-anchor="middle" dy=".35em" style="font: 11px Helvetica; fill: rgb(0, 0, 0);">10</text><text x="162.36853544990515" y="87.50011664000996" text-anchor="middle" dy=".35em" style="font: 11px Helvetica; fill: rgb(0, 0, 0);">15</text><text x="182.49994168005685" y="67.36863646293835" text-anchor="middle" dy=".35em" style="font: 11px Helvetica; fill: rgb(0, 0, 0);">20</text><text x="210" y="60" text-anchor="middle" dy=".35em" style="font: 11px Helvetica; fill: rgb(0, 0, 0);">25</text><text x="237.50005831994315" y="67.36863646293835" text-anchor="middle" dy=".35em" style="font: 11px Helvetica; fill: rgb(0, 0, 0);">30</text><text x="257.63146455009485" y="87.50011664000998" text-anchor="middle" dy=".35em" style="font: 11px Helvetica; fill: rgb(0, 0, 0);">35</text><text x="264.9999999996289" y="115.00020202628069" text-anchor="middle" dy=".35em" style="font: 11px Helvetica; fill: rgb(0, 0, 0);">40</text><text x="257.6312625233858" y="142.50023327952525" text-anchor="middle" dy=".35em" style="font: 11px Helvetica; fill: rgb(0, 0, 0);">45</text><text x="237.49970839966582" y="162.63156556248543" text-anchor="middle" dy=".35em" style="font: 11px Helvetica; fill: rgb(0, 0, 0);">50</text></g><g id="g8" class="type-arc"><path transform="translate(210,115)" d="M-39.99957585405936,69.28227718179701A80,80 0 0,1 -39.99957585405936,69.28227718179701L-33.49964477777471,58.023907139754996A67,67 0 0,0 -33.49964477777471,58.023907139754996Z" style="fill: rgb(109, 110, 112); stroke: rgb(109, 110, 112); stroke-width: 2;"></path><path transform="translate(210,115)" d="M-69.281836397652,40.00033931567309A80,80 0 0,1 -69.281836397652,40.00033931567309L-58.023537983033556,33.500284176876214A67,67 0 0,0 -58.023537983033556,33.500284176876214Z" style="fill: rgb(109, 110, 112); stroke: rgb(109, 110, 112); stroke-width: 2;"></path><path transform="translate(210,115)" d="M-79.9999999994603,0.00029385640824506373A80,80 0 0,1 -79.9999999994603,0.00029385640824506373L-66.999999999548,0.0002461047419052409A67,67 0 0,0 -66.999999999548,0.0002461047419052409Z" style="fill: rgb(109, 110, 112); stroke: rgb(109, 110, 112); stroke-width: 2;"></path><path transform="translate(210,115)" d="M-69.28213025468344,-39.99983034180368A80,80 0 0,1 -69.28213025468344,-39.99983034180368L-58.023784088297376,-33.49985791126058A67,67 0 0,0 -58.023784088297376,-33.49985791126058Z" style="fill: rgb(109, 110, 112); stroke: rgb(109, 110, 112); stroke-width: 2;"></path><path transform="translate(210,115)" d="M-40.00008482900823,-69.28198332663511A80,80 0 0,1 -40.00008482900823,-69.28198332663511L-33.50007104429439,-58.02366103605691A67,67 0 0,0 -33.50007104429439,-58.02366103605691Z" style="fill: rgb(109, 110, 112); stroke: rgb(109, 110, 112); stroke-width: 2;"></path><path transform="translate(210,115)" d="M4.898587196589413e-15,-80A80,80 0 0,1 4.898587196589413e-15,-80L4.102566777143633e-15,-67A67,67 0 0,0 4.102566777143633e-15,-67Z" style="fill: rgb(109, 110, 112); stroke: rgb(109, 110, 112); stroke-width: 2;"></path><path transform="translate(210,115)" d="M40.00008482900824,-69.28198332663511A80,80 0 0,1 40.00008482900824,-69.28198332663511L33.500071044294394,-58.02366103605691A67,67 0 0,0 33.500071044294394,-58.02366103605691Z" style="fill: rgb(109, 110, 112); stroke: rgb(109, 110, 112); stroke-width: 2;"></path><path transform="translate(210,115)" d="M69.28213025468344,-39.999830341803666A80,80 0 0,1 69.28213025468344,-39.999830341803666L58.02378408829738,-33.49985791126057A67,67 0 0,0 58.02378408829738,-33.49985791126057Z" style="fill: rgb(109, 110, 112); stroke: rgb(109, 110, 112); stroke-width: 2;"></path><path transform="translate(210,115)" d="M79.9999999994603,0.0002938564082726245A80,80 0 0,1 79.9999999994603,0.0002938564082726245L66.999999999548,0.000246104741928323A67,67 0 0,0 66.999999999548,0.000246104741928323Z" style="fill: rgb(109, 110, 112); stroke: rgb(109, 110, 112); stroke-width: 2;"></path><path transform="translate(210,115)" d="M69.281836397652,40.000339315673095A80,80 0 0,1 69.281836397652,40.000339315673095L58.02353798303355,33.50028417687622A67,67 0 0,0 58.02353798303355,33.50028417687622Z" style="fill: rgb(109, 110, 112); stroke: rgb(109, 110, 112); stroke-width: 2;"></path><path transform="translate(210,115)" d="M39.99957585405938,69.282277181797A80,80 0 0,1 39.99957585405938,69.282277181797L33.49964477777473,58.02390713975499A67,67 0 0,0 33.49964477777473,58.02390713975499Z" style="fill: rgb(109, 110, 112); stroke: rgb(109, 110, 112); stroke-width: 2;"></path></g><g id="g9" class="type-arc"><path transform="translate(210,115)" d="M28.290083080653186,-58.520690352128796A65,65 0 0,1 28.290083080653186,-58.520690352128796L0,0Z" style="fill: rgb(0, 0, 0); stroke: rgb(224, 65, 69); stroke-width: 3;"></path></g><g id="g10" class="type-symbol"><path transform="translate(210,115)" d="M0,5.046265044040321A5.046265044040321,5.046265044040321 0 1,1 0,-5.046265044040321A5.046265044040321,5.046265044040321 0 1,1 0,5.046265044040321Z" style="fill: rgb(224, 65, 69);"></path></g></g></g></g><defs><clippath id="clip"><rect id="clip-rect" x="0" y="0" width="420" height="230"></rect></clippath></defs></svg></div><div class="ui-resizable-handle ui-resizable-e" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: block;"></div></div>

    <script>
        $("#error").css({
          width: "100%",
          position: "absolute",
          zIndex: 10
        });

        var params = JSON.parse(String(JSON.stringify({"name":"temp","field":"Field 1","min":"0","max":"50","display_value":"true","units":"celcius","tick_interval":"5","update_interval":"15","range":{"0":{"start":"40","end":"50","color":"#ff0000"},"1":{"start":"30","end":"40","color":"#e7c208"},"2":{"start":"0","end":"30","color":"#08f724"}}})));
        document.title = params.name;
        var gauge = null;

        var gaugeSpec = {
    			"name": "circular-gauge",
    			"width": "420",
    			"height": "230",
    			"padding": "auto",
    			"background": "white",
    			"tipEnabled": false,
    			"interactivity": false,
    			"resizable": true,
    			"data": [],
    			"scales": [
    				{
    					"name": "s",
    					"type": "linear",
    					"domain": {
    						"data": "majorTicks",
    						"field": "data"
    					},
    					"rangeMin": -2.618,
    					"rangeMax": 2.618,
    					"clamp": "true",
              "zero": false
    				}
    			],
    			"marks": [
    				{
    					"type": "arc",
    					"properties": {
    						"enter": {
    							"x": {
    								"group": "width",
    								"mult": 0.5
    							},
    							"y": {
    								"group": "height",
    								"mult": 0.5
    							},
    							"startAngle": {
    								"value": -3.14159
    							},
    							"endAngle": {
    								"value": 3.14159
    							},
    							"innerRadius": {
    								"value": 90
    							},
    							"outerRadius": {
    								"value": 92
    							},
    							"fill": {
    								"value": "#C7C8CA"
    							}
    						}
    					}
    				},
    				{
    					"type": "arc",
    					"properties": {
    						"enter": {
    							"x": {
    								"group": "width",
    								"mult": 0.5
    							},
    							"y": {
    								"group": "height",
    								"mult": 0.5
    							},
    							"startAngle": {
    								"value": -2.618
    							},
    							"endAngle": {
    								"value": 2.618
    							},
    							"innerRadius": {
    								"value": 78
    							},
    							"outerRadius": {
    								"value": 80
    							},
    							"fill": {
    								"value": "#6D6E70"
    							},
    							"stroke": {
    								"value": "#6D6E70"
    							}
    						}
    					}
    				},
    				{
    					"type": "arc",
    					"from": {
    						"data": "scalecolors"
    					},
    					"properties": {
    						"enter": {
    							"x": {
    								"group": "width",
    								"mult": 0.5
    							},
    							"y": {
    								"group": "height",
    								"mult": 0.5
    							},
    							"startAngle": {
    								"field": "data.limit.0",
    								"scale": "s"
    							},
    							"endAngle": {
    								"field": "data.limit.1",
    								"scale": "s"
    							},
    							"innerRadius": {
    								"value": 70
    							},
    							"outerRadius": {
    								"value": 78
    							},
    							"fill": {
    								"field": "data.color"
    							}
    						}
    					}
    				},
    				{
    					"type": "text",
    					"from": {
    						"data": "meta"
    					},
    					"name": "units",
    					"properties": {
    						"enter": {
    							"align": {
    								"value": "center"
    							},
    							"baseline": {
    								"value": "middle"
    							},
    							"fill": {
    								"value": "#000"
    							},
    							"font": {
    								"value": "Helvetica"
    							},
    							"fontSize": {
    								"value": 14
    							},
    							"text": {
    								"field": "data.units"
    							},
    							"x": {
    								"group": "width",
    								"mult": 0.5
    							},
    							"y": {
    								"group": "height",
    								"mult": 0.5
    							},
    							"dy": {
    								"value": 125
    							},
                  "dx": {
    								"value": 0
    							}
    						}
    					}
    				},
    				{
    					"type": "text",
    					"from": {
    						"data": "gaugeValue"
    					},
    					"name": "value",
    					"properties": {
    						"enter": {
    							"align": {
    								"value": "center"
    							},
    							"baseline": {
    								"value": "middle"
    							},
    							"fill": {
    								"value": "#000"
    							},
    							"font": {
    								"value": "Helvetica"
    							},
    							"fontSize": {
    								"value": 14
    							},
    							"text": {
    								"template": "{{data|number:'.g'}}"
    							},
    							"x": {
    								"group": "width",
    								"mult": 0.5
    							},
    							"y": {
    								"group": "height",
    								"mult": 0.5
    							},
    							"dy": {
    								"value": 110
    							}
    						}
    					}
    				},
    				{
    					"type": "text",
    					"from": {
    						"data": "majorTicks"
    					},
    					"properties": {
    						"enter": {
    							"align": {
    								"value": "center"
    							},
    							"baseline": {
    								"value": "middle"
    							},
    							"fill": {
    								"value": "#000"
    							},
    							"font": {
    								"value": "Helvetica"
    							},
    							"fontSize": {
    								"value": 11
    							},
    							"text": {
    								"template": "{{data|number:'.r'}}"
    							},
    							"x": {
    								"group": "width",
    								"mult": 0.5
    							},
    							"y": {
    								"group": "height",
    								"mult": 0.5
    							},
    							"radius": {
    								"value": 55
    							},
    							"theta": {
    								"field": "data",
    								"scale": "s"
    							}
    						}
    					}
    				},
    				{
    					"type": "arc",
    					"from": {
    						"data": "majorTicks"
    					},
    					"properties": {
    						"enter": {
    							"x": {
    								"group": "width",
    								"mult": 0.5
    							},
    							"y": {
    								"group": "height",
    								"mult": 0.5
    							},
    							"startAngle": {
    								"field": "data",
    								"scale": "s"
    							},
    							"endAngle": {
    								"field": "data",
    								"scale": "s"
    							},
    							"innerRadius": {
    								"value": 67
    							},
    							"outerRadius": {
    								"value": 80
    							},
    							"fill": {
    								"value": "#6D6E70"
    							},
    							"strokeWidth": {
    								"value": 2
    							},
    							"stroke": {
    								"value": "#6D6E70"
    							}
    						}
    					}
    				},
    				{
    					"type": "arc",
    					"from": {
    						"data": "gaugeValue"
    					},
    					"properties": {
    						"enter": {
    							"x": {
    								"group": "width",
    								"mult": 0.5
    							},
    							"y": {
    								"group": "height",
    								"mult": 0.5
    							},
    							"startAngle": {
    								"field": "data",
    								"scale": "s"
    							},
    							"endAngle": {
    								"field": "data",
    								"scale": "s"
    							},
    							"innerRadius": {
    								"value": 0
    							},
    							"outerRadius": {
    								"value": 65
    							},
    							"fill": {
    								"value": "#000"
    							},
    							"strokeWidth": {
    								"value": 3
    							},
    							"stroke": {
    								"value": "#E04145"
    							}
    						}
    					}
    				},
    				{
    					"type": "symbol",
    					"properties": {
    						"enter": {
    							"x": {
    								"group": "width",
    								"mult": 0.5
    							},
    							"y": {
    								"group": "height",
    								"mult": 0.5
    							},
    							"size": {
    								"value": 80
    							},
    							"fill": {
    								"value": "#E04145"
    							}
    						}
    					}
    				}
    			]
    		};

        function setGaugeValue() {
      			if (gauge.view !== null) {

              var ThingSpeak_field = params.field.replace(/[^0-9\.]+/g, "");
              var ThingSpeak_chID = "3214645";
              var ThingSpeak_APIkey = "VZFKFRBG6SOKBJ8A";              

              $.getJSON( 'https://thingspeak.mathworks.com/channels/' + ThingSpeak_chID + '/fields/' + ThingSpeak_field + '/last.json?api_key=' + ThingSpeak_APIkey, function(data) {
                // get the data point
                var field_value = parseFloat(data['field'+ThingSpeak_field]);

                // if there is a data point, display it
                if (field_value || typeof field_value !== 'undefined') {
                  document.getElementById('error').style.visibility = 'hidden';
                  gauge.view.data({gaugeValue: [field_value]});
                  gauge.viewUpdate({props: "enter", legend: false});
                  gauge.viewUpdate({props: "update", legend: false});
                }
                else {
                  showError();
                }
              }).fail(function(){
                showError();
            });

            var showError = function() {
              $("#chart").css({
                  position: "relative",
                  opacity: "0.5"
              });
              document.getElementById('error').className += "flash alert alert-danger";
              document.getElementById('error').innerHTML = "Field value unavailable";
            }
          }
        }

        // Get the precision of an input number
        var getPrecision = function(number) {
          if (!isFinite(number)) return 0;
          var exponent = 1;
          var precision = 0;
          while (Math.round(number * exponent) / exponent !== number) { exponent *= 10; precision++; }
          return precision;
        }
        
        // returns an array represting points where ticks are to be inserted.
        var getTickValues = function() {
          var min = parseFloat(params.min);
          var max = parseFloat(params.max);
          var interval = parseFloat(params.tick_interval);
          var maxTicks = 25;
          var tickPrecision = getPrecision(interval);
          
          if ( Math.abs((max - min)/interval) > maxTicks ) {
            // Set the interval to a larger value so that we are able to render ticks without overcrowding the range of the gauge
            interval = parseFloat((Math.abs(max - min)/maxTicks).toFixed(tickPrecision));
            // Handle case where interval can be zero. Minimum interval is arbitrarily set to resolution of 16-bits microcontroller.
            if (interval < 1e-16) { interval = 1e-16 };
          };
          
          var tickArr = [];
          
          for(var i = min; i < (max + interval); i= i + interval) {
            tickArr.push(parseFloat(i.toFixed(tickPrecision)));
          }
          return tickArr;
        }

        // returns arrya containing the start and end for a particualr color band.
        var getScaleColors = function() {
          var range = params.range;
          var rangeColor = [];
          var min = parseFloat(params.min);
          var max = parseFloat(params.max);

          if(range !== undefined && range !== "") {
            for (var a in range) {
              rangeColor.push({
                "limit": [parseFloat(range[a].start), parseFloat(range[a].end)],
                "color": range[a].color
              });
            }
          }
          else {
            rangeColor = [{
              "limit": [min,min],
              "color": '#000000'
            }];
          }

          return rangeColor;
        }

    		function initGauge(domId, gaugeOptions) {
    			gauge = new thingSpeakWebplot();
    			gauge.loadLibraries();
    			var options = gaugeOptions || {};
    			if (typeof options === 'object') {
    				if (!options.initialValue || typeof options.initialValue !== 'number') {
    					options.initialValue = parseFloat(params.min);
    				}
    				gaugeSpec.data.push({
    					"name": "gaugeValue",
    					"values": [ options.initialValue ]
          	});
    				if (!options.units || typeof options.units !== 'string') {
    					options.units = params.units;
    				}
    				gaugeSpec.data.push({
          		"name": "meta",
          		"values": [{
              	"units": options.units
            	}]
        		});
    				if (!options.majorTicks || !Array.isArray(options.majorTicks)) {
    					options.majorTicks = [0, 20, 40, 60, 80, 100];
    				}
            gaugeSpec.data.push({
    					"name": "majorTicks",
    					"values": options.majorTicks,
    					"transform": [
    						{
    							"type": "stats",
    							"assign": "true"
    						}
    					]
    				});
    				if (!options.scaleColors || !Array.isArray(options.scaleColors)) {
    					options.scaleColors = [{"limit": [], "color": ""}];
    				}
    				gaugeSpec.data.push({
          		"name": "scalecolors",
          		"values": options.scaleColors
        		});
    			}
          gauge.setSpec(gaugeSpec, domId);
    			if (options.callback && typeof options.callback === 'function') {
    				gauge.render(options.callback);
    			} else {
    				gauge.render();
    			}
    		}

    		initGauge("#chart", {
    			"units": "" ,
    			"majorTicks": getTickValues(),
    			"scaleColors": getScaleColors(),
    			"callback": function() {
    				setGaugeValue();
    			}
    		});

        $(window).on('load',function() {
          if(params.display_value === "true") {
            $("g#g6").show();
          }
          else {
            $("g#g6").hide();
          }
        });

        // converting params.update_interval to milliseconds for 'setInterval' to work.
        var update_interval = parseFloat(params.update_interval)*1000;

        setInterval(function() {
    			setGaugeValue();
    		}, update_interval);

    </script>



<canvas class="vega_hidden" width="1" height="1" style="display: none;"></canvas></body></html>